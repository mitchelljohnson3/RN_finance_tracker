{"version":3,"sources":["internal.native.ts"],"names":["React","Animated","Platform","useAnimatedText","childrenCount","tabIndex","position","offset","textColor","activeColor","childrenA","Array","fill","undefined","positionWithOffset","add","inputRange","map","_","i","color","interpolate","outputRange","opacity","useIndicator","layouts","tabsLayout","renderIndex","setRenderIndex","useState","style","useMemo","__","current","transform","scaleX","width","translateX","cl","x","onUpdateTabLayout","useCallback","prev","useOffsetScroller","index","updateScroll","mode","direction","useRef","useEffect","OS","id","addListener","nOffset","newOffset","value","oldDirection","removeListener"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport type {\n  AnimatedColorArgs,\n  AnimatedTextStyle,\n  AnimatedViewStyle,\n  IndicatorArgs,\n  IndicatorReturns,\n  OffsetScrollArgs,\n} from './utils';\nimport { Animated, Platform } from 'react-native';\n\nexport function useAnimatedText({\n  childrenCount,\n  tabIndex,\n  position,\n  offset,\n  textColor,\n  activeColor,\n}: AnimatedColorArgs): AnimatedTextStyle {\n  const childrenA = Array(childrenCount).fill(undefined);\n  const positionWithOffset = Animated.add(position!, offset!);\n  const inputRange = childrenA.map((_, i) => i);\n\n  return {\n    color: positionWithOffset.interpolate({\n      inputRange: inputRange,\n      outputRange: childrenA.map((_, i) =>\n        i === tabIndex ? activeColor : textColor\n      ),\n    }),\n    opacity: positionWithOffset.interpolate({\n      inputRange: inputRange,\n      outputRange: childrenA.map((_, i) => (i === tabIndex ? 1 : 0.6)),\n    }),\n  };\n}\n\nexport function useIndicator({\n  childrenCount,\n  position,\n  offset,\n  layouts,\n  tabsLayout,\n}: IndicatorArgs): IndicatorReturns {\n  const [renderIndex, setRenderIndex] = React.useState(0);\n\n  const style = React.useMemo<AnimatedViewStyle | null>(() => {\n    /* eslint-disable @typescript-eslint/no-unused-vars  */\n    // @ts-ignore\n    let _ = renderIndex;\n    const childrenA = Array(childrenCount).fill(undefined);\n    const inputRange = childrenA.map((__, i) => i);\n    const positionWithOffset = Animated.add(position!, offset!);\n    return position && tabsLayout && layouts.current\n      ? {\n          transform: [\n            {\n              scaleX: positionWithOffset.interpolate({\n                inputRange,\n                outputRange: childrenA.map(\n                  (__, i) => layouts.current?.[i]?.width || 0\n                ),\n              }),\n            },\n            {\n              translateX: positionWithOffset.interpolate({\n                inputRange,\n                outputRange: childrenA.map((__, i) => {\n                  const cl = layouts.current?.[i];\n                  if (!cl) {\n                    return 0;\n                  }\n                  return (cl.x + cl.width / 2) / cl.width;\n                }),\n              }),\n            },\n          ],\n        }\n      : null;\n  }, [position, offset, tabsLayout, layouts, renderIndex, childrenCount]);\n\n  const onUpdateTabLayout = React.useCallback(() => {\n    setRenderIndex((prev) => prev + 1);\n  }, [setRenderIndex]);\n\n  return [undefined, onUpdateTabLayout, style];\n}\n\nexport function useOffsetScroller({\n  index,\n  offset,\n  updateScroll,\n  mode,\n}: OffsetScrollArgs) {\n  // we want native to scroll before the index changes\n  const direction = React.useRef<undefined | 'next' | 'prev'>(undefined);\n  React.useEffect(() => {\n    // android does not work unfortunately\n    if (offset && Platform.OS !== 'android' && mode === 'scrollable') {\n      const id = offset.addListener((nOffset) => {\n        const newOffset = nOffset.value;\n        const oldDirection = direction.current;\n\n        if (newOffset > 0.1) {\n          direction.current = 'next';\n        } else if (newOffset < -0.1) {\n          direction.current = 'prev';\n        }\n\n        if (direction.current) {\n          if (oldDirection !== direction.current) {\n            updateScroll(direction.current);\n          }\n        }\n      });\n      return () => {\n        offset.removeListener(id);\n      };\n    }\n    return undefined;\n  }, [offset, updateScroll, direction, mode]);\n\n  React.useEffect(() => {\n    direction.current = undefined;\n  }, [index]);\n}\n"]}