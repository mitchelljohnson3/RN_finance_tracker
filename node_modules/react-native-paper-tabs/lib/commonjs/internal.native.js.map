{"version":3,"sources":["internal.native.ts"],"names":["useAnimatedText","childrenCount","tabIndex","position","offset","textColor","activeColor","childrenA","Array","fill","undefined","positionWithOffset","Animated","add","inputRange","map","_","i","color","interpolate","outputRange","opacity","useIndicator","layouts","tabsLayout","renderIndex","setRenderIndex","React","useState","style","useMemo","__","current","transform","scaleX","width","translateX","cl","x","onUpdateTabLayout","useCallback","prev","useOffsetScroller","index","updateScroll","mode","direction","useRef","useEffect","Platform","OS","id","addListener","nOffset","newOffset","value","oldDirection","removeListener"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport type {\n  AnimatedColorArgs,\n  AnimatedTextStyle,\n  AnimatedViewStyle,\n  IndicatorArgs,\n  IndicatorReturns,\n  OffsetScrollArgs,\n} from './utils';\nimport { Animated, Platform } from 'react-native';\n\nexport function useAnimatedText({\n  childrenCount,\n  tabIndex,\n  position,\n  offset,\n  textColor,\n  activeColor,\n}: AnimatedColorArgs): AnimatedTextStyle {\n  const childrenA = Array(childrenCount).fill(undefined);\n  const positionWithOffset = Animated.add(position!, offset!);\n  const inputRange = childrenA.map((_, i) => i);\n\n  return {\n    color: positionWithOffset.interpolate({\n      inputRange: inputRange,\n      outputRange: childrenA.map((_, i) =>\n        i === tabIndex ? activeColor : textColor\n      ),\n    }),\n    opacity: positionWithOffset.interpolate({\n      inputRange: inputRange,\n      outputRange: childrenA.map((_, i) => (i === tabIndex ? 1 : 0.6)),\n    }),\n  };\n}\n\nexport function useIndicator({\n  childrenCount,\n  position,\n  offset,\n  layouts,\n  tabsLayout,\n}: IndicatorArgs): IndicatorReturns {\n  const [renderIndex, setRenderIndex] = React.useState(0);\n\n  const style = React.useMemo<AnimatedViewStyle | null>(() => {\n    /* eslint-disable @typescript-eslint/no-unused-vars  */\n    // @ts-ignore\n    let _ = renderIndex;\n    const childrenA = Array(childrenCount).fill(undefined);\n    const inputRange = childrenA.map((__, i) => i);\n    const positionWithOffset = Animated.add(position!, offset!);\n    return position && tabsLayout && layouts.current\n      ? {\n          transform: [\n            {\n              scaleX: positionWithOffset.interpolate({\n                inputRange,\n                outputRange: childrenA.map(\n                  (__, i) => layouts.current?.[i]?.width || 0\n                ),\n              }),\n            },\n            {\n              translateX: positionWithOffset.interpolate({\n                inputRange,\n                outputRange: childrenA.map((__, i) => {\n                  const cl = layouts.current?.[i];\n                  if (!cl) {\n                    return 0;\n                  }\n                  return (cl.x + cl.width / 2) / cl.width;\n                }),\n              }),\n            },\n          ],\n        }\n      : null;\n  }, [position, offset, tabsLayout, layouts, renderIndex, childrenCount]);\n\n  const onUpdateTabLayout = React.useCallback(() => {\n    setRenderIndex((prev) => prev + 1);\n  }, [setRenderIndex]);\n\n  return [undefined, onUpdateTabLayout, style];\n}\n\nexport function useOffsetScroller({\n  index,\n  offset,\n  updateScroll,\n  mode,\n}: OffsetScrollArgs) {\n  // we want native to scroll before the index changes\n  const direction = React.useRef<undefined | 'next' | 'prev'>(undefined);\n  React.useEffect(() => {\n    // android does not work unfortunately\n    if (offset && Platform.OS !== 'android' && mode === 'scrollable') {\n      const id = offset.addListener((nOffset) => {\n        const newOffset = nOffset.value;\n        const oldDirection = direction.current;\n\n        if (newOffset > 0.1) {\n          direction.current = 'next';\n        } else if (newOffset < -0.1) {\n          direction.current = 'prev';\n        }\n\n        if (direction.current) {\n          if (oldDirection !== direction.current) {\n            updateScroll(direction.current);\n          }\n        }\n      });\n      return () => {\n        offset.removeListener(id);\n      };\n    }\n    return undefined;\n  }, [offset, updateScroll, direction, mode]);\n\n  React.useEffect(() => {\n    direction.current = undefined;\n  }, [index]);\n}\n"]}